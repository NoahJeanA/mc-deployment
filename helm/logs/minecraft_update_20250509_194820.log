2025-05-09 19:48:20,433 [INFO] === MINECRAFT ZERO-DOWNTIME UPDATE GESTARTET (20250509_194820) ===
2025-05-09 19:48:20,434 [INFO] Release: minecraft-server, Namespace: default
2025-05-09 19:48:20,435 [INFO] SCHRITT 1/10 (10%): Prüfe Serverstatus vor dem Update
2025-05-09 19:48:20,436 [DEBUG] Verbindung zum RCON-Server 192.168.0.165:30575 wird hergestellt...
2025-05-09 19:48:20,443 [INFO] SUCCESS: RCON-Verbindung hergestellt zu 192.168.0.165:30575
2025-05-09 19:48:20,444 [DEBUG] RCON-Befehl wird gesendet: list
2025-05-09 19:48:20,449 [DEBUG] RCON-Antwort: There are 1 of a max of 20 players online: StraussRiese456
2025-05-09 19:48:20,450 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:48:20,451 [INFO] Aktuell 1 Spieler online
2025-05-09 19:48:20,451 [INFO] SCHRITT 2/10 (20%): Stelle sicher, dass Server 0 läuft
2025-05-09 19:48:20,452 [INFO] Skaliere StatefulSet minecraft-server auf 1 Replicas...
2025-05-09 19:48:20,453 [DEBUG] Ausführen: kubectl scale statefulset minecraft-server --replicas=1 -n default
2025-05-09 19:48:20,514 [DEBUG] STDOUT:
statefulset.apps/minecraft-server scaled
2025-05-09 19:48:20,516 [INFO] SUCCESS: StatefulSet auf 1 skaliert
2025-05-09 19:48:20,517 [INFO] Warte auf Bereitschaft von Pod minecraft-server-0...
2025-05-09 19:48:20,518 [DEBUG] Ausführen: kubectl wait --for=condition=ready pod/minecraft-server-0 --timeout=180s -n default
2025-05-09 19:48:20,672 [DEBUG] STDOUT:
pod/minecraft-server-0 condition met
2025-05-09 19:48:20,673 [INFO] SUCCESS: Pod minecraft-server-0 ist bereit
2025-05-09 19:48:20,674 [INFO] SCHRITT 3/10 (30%): Benachrichtige Spieler über bevorstehendes Update
2025-05-09 19:48:20,675 [DEBUG] Verbindung zum RCON-Server 192.168.0.165:30575 wird hergestellt...
2025-05-09 19:48:20,683 [INFO] SUCCESS: RCON-Verbindung hergestellt zu 192.168.0.165:30575
2025-05-09 19:48:20,684 [DEBUG] RCON-Befehl wird gesendet: tellraw @a {"text":"§6§lServer-Update wird vorbereitet. Keine Unterbrechung erforderlich!","color":"gold","bold":true}
2025-05-09 19:48:20,704 [DEBUG] RCON-Antwort: 
2025-05-09 19:48:20,705 [DEBUG] RCON-Befehl wird gesendet: say §6§lServer-Update wird vorbereitet. Keine Unterbrechung erforderlich!
2025-05-09 19:48:20,711 [DEBUG] RCON-Antwort: 
2025-05-09 19:48:20,712 [INFO] SUCCESS: Spielerbenachrichtigung gesendet: §6§lServer-Update wird vorbereitet. Keine Unterbrechung erforderlich!
2025-05-09 19:48:20,713 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:48:20,714 [INFO] SCHRITT 4/10 (40%): Aktualisiere Minecraft-Konfiguration mit Helm
2025-05-09 19:48:20,715 [INFO] Führe Helm-Upgrade für Release minecraft-server durch...
2025-05-09 19:48:20,715 [DEBUG] Ausführen: helm upgrade minecraft-server ./minecraft/ --set replicaCount=1 -n default
2025-05-09 19:48:21,435 [DEBUG] STDOUT:
Release "minecraft-server" has been upgraded. Happy Helming!
NAME: minecraft-server
LAST DEPLOYED: Fri May  9 19:48:20 2025
NAMESPACE: default
STATUS: deployed
REVISION: 4
TEST SUITE: None
NOTES:
Minecraft-Server wurde erfolgreich installiert!

StatefulSet: minecraft-server
Pod: minecraft-server-0
Welt-PVC: minecraft-server-world
Cash-PVC: minecraft-server-cash
Server-Eigenschaften: minecraft-server-server-properties

Um den Minecraft-Server zu steuern:
- Einschalten: kubectl scale statefulset minecraft-server --replicas=1
- Ausschalten: kubectl scale statefulset minecraft-server --replicas=0
- Updates durchführen: ./update-minecraft.sh

Verbinden mit dem Server:
- Server: <NODE_IP>:30565
- RCON: <NODE_IP>:30575

Um die Logs des Servers anzuzeigen:
  kubectl logs -f minecraft-server-0

Erfolgreiche Installation!
2025-05-09 19:48:21,436 [INFO] SUCCESS: Helm-Upgrade erfolgreich abgeschlossen
2025-05-09 19:48:21,436 [INFO] SCHRITT 5/10 (50%): Speichere aktuelle Weltdaten
2025-05-09 19:48:21,437 [DEBUG] Verbindung zum RCON-Server 192.168.0.165:30575 wird hergestellt...
2025-05-09 19:48:21,444 [INFO] SUCCESS: RCON-Verbindung hergestellt zu 192.168.0.165:30575
2025-05-09 19:48:21,445 [DEBUG] RCON-Befehl wird gesendet: tellraw @a {"text":"§6§lWeltdaten werden gespeichert...","color":"gold","bold":true}
2025-05-09 19:48:21,452 [DEBUG] RCON-Antwort: 
2025-05-09 19:48:21,452 [DEBUG] RCON-Befehl wird gesendet: say §6§lWeltdaten werden gespeichert...
2025-05-09 19:48:21,458 [DEBUG] RCON-Antwort: 
2025-05-09 19:48:21,459 [INFO] SUCCESS: Spielerbenachrichtigung gesendet: §6§lWeltdaten werden gespeichert...
2025-05-09 19:48:21,459 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:48:21,460 [DEBUG] Verbindung zum RCON-Server 192.168.0.165:30575 wird hergestellt...
2025-05-09 19:48:21,466 [INFO] SUCCESS: RCON-Verbindung hergestellt zu 192.168.0.165:30575
2025-05-09 19:48:21,467 [DEBUG] RCON-Befehl wird gesendet: save-all flush
2025-05-09 19:48:21,689 [DEBUG] RCON-Antwort: Saving the game (this may take a moment!)Saved the game
2025-05-09 19:48:21,690 [INFO] SUCCESS: Weltdaten gespeichert (save-all flush)
2025-05-09 19:48:21,691 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:48:24,692 [INFO] SCHRITT 6/10 (60%): Synchronisiere Weltdaten von Server 0 zu Backup
2025-05-09 19:48:24,693 [DEBUG] Verbindung zum RCON-Server 192.168.0.165:30575 wird hergestellt...
2025-05-09 19:48:24,700 [INFO] SUCCESS: RCON-Verbindung hergestellt zu 192.168.0.165:30575
2025-05-09 19:48:24,700 [DEBUG] RCON-Befehl wird gesendet: tellraw @a {"text":"§6§lWeltdaten werden synchronisiert...","color":"gold","bold":true}
2025-05-09 19:48:24,706 [DEBUG] RCON-Antwort: 
2025-05-09 19:48:24,706 [DEBUG] RCON-Befehl wird gesendet: say §6§lWeltdaten werden synchronisiert...
2025-05-09 19:48:24,712 [DEBUG] RCON-Antwort: 
2025-05-09 19:48:24,712 [INFO] SUCCESS: Spielerbenachrichtigung gesendet: §6§lWeltdaten werden synchronisiert...
2025-05-09 19:48:24,713 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:48:24,714 [INFO] Synchronisiere Weltdaten zum Backup für Pod minecraft-server-0...
2025-05-09 19:48:24,715 [DEBUG] Ausführen: kubectl exec -i minecraft-server-0 -n default -- /bin/bash -c /scripts/world-sync.sh to-backup
2025-05-09 19:48:24,910 [DEBUG] STDOUT:
Synchronisiere Weltdaten für world von Quelle zu Ziel...
Kopiere von dieser Welt zu Backup-Welt...
Synchronisation abgeschlossen!
2025-05-09 19:48:24,911 [DEBUG] STDERR:
Defaulted container "minecraft-java-container" out of: minecraft-java-container, wait-for-resources (init)
2025-05-09 19:48:24,912 [INFO] SUCCESS: Weltsynchronisierung zum Backup abgeschlossen
2025-05-09 19:48:24,913 [INFO] SCHRITT 7/10 (70%): Starte zweiten Server mit Backup-Weltdaten
2025-05-09 19:48:24,913 [INFO] Skaliere StatefulSet minecraft-server auf 2 Replicas...
2025-05-09 19:48:24,914 [DEBUG] Ausführen: kubectl scale statefulset minecraft-server --replicas=2 -n default
2025-05-09 19:48:24,959 [DEBUG] STDOUT:
statefulset.apps/minecraft-server scaled
2025-05-09 19:48:24,960 [INFO] SUCCESS: StatefulSet auf 2 skaliert
2025-05-09 19:48:24,960 [INFO] Warte auf Bereitschaft von Pod minecraft-server-1...
2025-05-09 19:48:24,961 [DEBUG] Ausführen: kubectl wait --for=condition=ready pod/minecraft-server-1 --timeout=180s -n default
2025-05-09 19:49:35,332 [DEBUG] STDOUT:
pod/minecraft-server-1 condition met
2025-05-09 19:49:35,338 [INFO] SUCCESS: Pod minecraft-server-1 ist bereit
2025-05-09 19:49:35,338 [INFO] SCHRITT 8/10 (80%): Lade Weltdaten aus Backup auf Server 1
2025-05-09 19:49:35,339 [INFO] Synchronisiere Weltdaten vom Backup für Pod minecraft-server-1...
2025-05-09 19:49:35,340 [DEBUG] Ausführen: kubectl exec -i minecraft-server-1 -n default -- /bin/bash -c /scripts/world-sync.sh from-backup
2025-05-09 19:49:35,483 [DEBUG] STDOUT:
Synchronisiere Weltdaten für world von Quelle zu Ziel...
Kopiere von Backup-Welt zu dieser Welt...
Synchronisation abgeschlossen!
2025-05-09 19:49:35,484 [DEBUG] STDERR:
Defaulted container "minecraft-java-container" out of: minecraft-java-container, wait-for-resources (init)
2025-05-09 19:49:35,485 [INFO] SUCCESS: Weltsynchronisierung vom Backup abgeschlossen
2025-05-09 19:49:35,486 [DEBUG] Verbindung zum RCON-Server 192.168.0.165:30575 wird hergestellt...
2025-05-09 19:49:35,494 [INFO] SUCCESS: RCON-Verbindung hergestellt zu 192.168.0.165:30575
2025-05-09 19:49:35,494 [DEBUG] RCON-Befehl wird gesendet: tellraw @a {"text":"§6§lAlternativer Server ist bereit. Update wird fortgesetzt...","color":"gold","bold":true}
2025-05-09 19:49:35,512 [DEBUG] RCON-Antwort: No player was found
2025-05-09 19:49:35,513 [DEBUG] RCON-Befehl wird gesendet: say §6§lAlternativer Server ist bereit. Update wird fortgesetzt...
2025-05-09 19:49:35,526 [DEBUG] RCON-Antwort: 
2025-05-09 19:49:35,527 [INFO] SUCCESS: Spielerbenachrichtigung gesendet: §6§lAlternativer Server ist bereit. Update wird fortgesetzt...
2025-05-09 19:49:35,528 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:49:35,528 [INFO] SCHRITT 9/10 (90%): Starte Server 0 neu für Update
2025-05-09 19:49:35,529 [INFO] Lösche Pod minecraft-server-0 für Neustart...
2025-05-09 19:49:35,530 [DEBUG] Ausführen: kubectl delete pod minecraft-server-0 -n default
2025-05-09 19:50:36,487 [DEBUG] STDOUT:
pod "minecraft-server-0" deleted
2025-05-09 19:50:36,492 [INFO] SUCCESS: Pod minecraft-server-0 erfolgreich gelöscht
2025-05-09 19:50:36,493 [INFO] Warte auf Bereitschaft von Pod minecraft-server-0...
2025-05-09 19:50:36,493 [DEBUG] Ausführen: kubectl wait --for=condition=ready pod/minecraft-server-0 --timeout=180s -n default
2025-05-09 19:51:46,890 [DEBUG] STDOUT:
pod/minecraft-server-0 condition met
2025-05-09 19:51:46,894 [INFO] SUCCESS: Pod minecraft-server-0 ist bereit
2025-05-09 19:51:46,895 [INFO] SCHRITT 10/10 (100%): Synchronisiere Weltdaten vom Backup zurück zu Server 0
2025-05-09 19:51:46,895 [INFO] Synchronisiere Weltdaten vom Backup für Pod minecraft-server-0...
2025-05-09 19:51:46,896 [DEBUG] Ausführen: kubectl exec -i minecraft-server-0 -n default -- /bin/bash -c /scripts/world-sync.sh from-backup
2025-05-09 19:51:47,014 [DEBUG] STDOUT:
Synchronisiere Weltdaten für world von Quelle zu Ziel...
Kopiere von Backup-Welt zu dieser Welt...
Synchronisation abgeschlossen!
2025-05-09 19:51:47,015 [DEBUG] STDERR:
Defaulted container "minecraft-java-container" out of: minecraft-java-container, wait-for-resources (init)
2025-05-09 19:51:47,015 [INFO] SUCCESS: Weltsynchronisierung vom Backup abgeschlossen
2025-05-09 19:51:47,016 [INFO] SCHRITT 11/10 (110%): Räume auf: Fahre Server 1 herunter
2025-05-09 19:51:47,017 [DEBUG] Verbindung zum RCON-Server 192.168.0.165:30575 wird hergestellt...
2025-05-09 19:51:47,024 [INFO] SUCCESS: RCON-Verbindung hergestellt zu 192.168.0.165:30575
2025-05-09 19:51:47,025 [DEBUG] RCON-Befehl wird gesendet: tellraw @a {"text":"§a§lUpdate erfolgreich abgeschlossen!","color":"gold","bold":true}
2025-05-09 19:51:47,043 [DEBUG] RCON-Antwort: No player was found
2025-05-09 19:51:47,044 [DEBUG] RCON-Befehl wird gesendet: say §a§lUpdate erfolgreich abgeschlossen!
2025-05-09 19:51:47,057 [DEBUG] RCON-Antwort: 
2025-05-09 19:51:47,058 [INFO] SUCCESS: Spielerbenachrichtigung gesendet: §a§lUpdate erfolgreich abgeschlossen!
2025-05-09 19:51:47,059 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:51:47,060 [INFO] Skaliere StatefulSet minecraft-server auf 1 Replicas...
2025-05-09 19:51:47,061 [DEBUG] Ausführen: kubectl scale statefulset minecraft-server --replicas=1 -n default
2025-05-09 19:51:47,113 [DEBUG] STDOUT:
statefulset.apps/minecraft-server scaled
2025-05-09 19:51:47,114 [INFO] SUCCESS: StatefulSet auf 1 skaliert
2025-05-09 19:51:47,114 [INFO] SUCCESS: === UPDATE ERFOLGREICH ABGESCHLOSSEN (Dauer: 206.7s) ===
2025-05-09 19:51:47,115 [INFO] Detailliertes Update-Protokoll wurde gespeichert unter: logs/minecraft_update_20250509_194820.log

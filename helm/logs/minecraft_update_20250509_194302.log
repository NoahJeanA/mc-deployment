2025-05-09 19:43:02,593 [INFO] === MINECRAFT ZERO-DOWNTIME UPDATE GESTARTET (20250509_194302) ===
2025-05-09 19:43:02,594 [INFO] Release: minecraft-server, Namespace: default
2025-05-09 19:43:02,595 [INFO] SCHRITT 1/10 (10%): Prüfe Serverstatus vor dem Update
2025-05-09 19:43:02,596 [DEBUG] Verbindung zum RCON-Server server-debian-1:30575 wird hergestellt...
2025-05-09 19:43:02,599 [ERROR] RCON-Verbindung fehlgeschlagen: [Errno -2] Name or service not known
2025-05-09 19:43:02,600 [DEBUG] RCON-Befehl wird gesendet: list
2025-05-09 19:43:02,601 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:43:02,602 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:43:02,603 [INFO] SCHRITT 2/10 (20%): Stelle sicher, dass Server 0 läuft
2025-05-09 19:43:02,604 [INFO] Skaliere StatefulSet minecraft-server auf 1 Replicas...
2025-05-09 19:43:02,605 [DEBUG] Ausführen: kubectl scale statefulset minecraft-server --replicas=1 -n default
2025-05-09 19:43:02,665 [DEBUG] STDOUT:
statefulset.apps/minecraft-server scaled
2025-05-09 19:43:02,666 [INFO] SUCCESS: StatefulSet auf 1 skaliert
2025-05-09 19:43:02,667 [INFO] Warte auf Bereitschaft von Pod minecraft-server-0...
2025-05-09 19:43:02,667 [DEBUG] Ausführen: kubectl wait --for=condition=ready pod/minecraft-server-0 --timeout=180s -n default
2025-05-09 19:43:02,816 [DEBUG] STDOUT:
pod/minecraft-server-0 condition met
2025-05-09 19:43:02,817 [INFO] SUCCESS: Pod minecraft-server-0 ist bereit
2025-05-09 19:43:02,818 [INFO] SCHRITT 3/10 (30%): Benachrichtige Spieler über bevorstehendes Update
2025-05-09 19:43:02,819 [DEBUG] Verbindung zum RCON-Server server-debian-1:30575 wird hergestellt...
2025-05-09 19:43:02,822 [ERROR] RCON-Verbindung fehlgeschlagen: [Errno -2] Name or service not known
2025-05-09 19:43:02,823 [DEBUG] RCON-Befehl wird gesendet: tellraw @a {"text":"§6§lServer-Update wird vorbereitet. Keine Unterbrechung erforderlich!","color":"gold","bold":true}
2025-05-09 19:43:02,824 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:43:02,825 [DEBUG] RCON-Befehl wird gesendet: say §6§lServer-Update wird vorbereitet. Keine Unterbrechung erforderlich!
2025-05-09 19:43:02,825 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:43:02,826 [INFO] SUCCESS: Spielerbenachrichtigung gesendet: §6§lServer-Update wird vorbereitet. Keine Unterbrechung erforderlich!
2025-05-09 19:43:02,827 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:43:02,828 [INFO] SCHRITT 4/10 (40%): Aktualisiere Minecraft-Konfiguration mit Helm
2025-05-09 19:43:02,829 [INFO] Führe Helm-Upgrade für Release minecraft-server durch...
2025-05-09 19:43:02,830 [DEBUG] Ausführen: helm upgrade minecraft-server ./minecraft/ --set replicaCount=1 -n default
2025-05-09 19:43:03,563 [DEBUG] STDOUT:
Release "minecraft-server" has been upgraded. Happy Helming!
NAME: minecraft-server
LAST DEPLOYED: Fri May  9 19:43:02 2025
NAMESPACE: default
STATUS: deployed
REVISION: 3
TEST SUITE: None
NOTES:
Minecraft-Server wurde erfolgreich installiert!

StatefulSet: minecraft-server
Pod: minecraft-server-0
Welt-PVC: minecraft-server-world
Cash-PVC: minecraft-server-cash
Server-Eigenschaften: minecraft-server-server-properties

Um den Minecraft-Server zu steuern:
- Einschalten: kubectl scale statefulset minecraft-server --replicas=1
- Ausschalten: kubectl scale statefulset minecraft-server --replicas=0
- Updates durchführen: ./update-minecraft.sh

Verbinden mit dem Server:
- Server: <NODE_IP>:30565
- RCON: <NODE_IP>:30575

Um die Logs des Servers anzuzeigen:
  kubectl logs -f minecraft-server-0

Erfolgreiche Installation!
2025-05-09 19:43:03,564 [INFO] SUCCESS: Helm-Upgrade erfolgreich abgeschlossen
2025-05-09 19:43:03,565 [INFO] SCHRITT 5/10 (50%): Speichere aktuelle Weltdaten
2025-05-09 19:43:03,565 [DEBUG] Verbindung zum RCON-Server server-debian-1:30575 wird hergestellt...
2025-05-09 19:43:03,568 [ERROR] RCON-Verbindung fehlgeschlagen: [Errno -2] Name or service not known
2025-05-09 19:43:03,569 [DEBUG] RCON-Befehl wird gesendet: tellraw @a {"text":"§6§lWeltdaten werden gespeichert...","color":"gold","bold":true}
2025-05-09 19:43:03,571 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:43:03,572 [DEBUG] RCON-Befehl wird gesendet: say §6§lWeltdaten werden gespeichert...
2025-05-09 19:43:03,573 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:43:03,573 [INFO] SUCCESS: Spielerbenachrichtigung gesendet: §6§lWeltdaten werden gespeichert...
2025-05-09 19:43:03,574 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:43:03,575 [DEBUG] Verbindung zum RCON-Server server-debian-1:30575 wird hergestellt...
2025-05-09 19:43:03,578 [ERROR] RCON-Verbindung fehlgeschlagen: [Errno -2] Name or service not known
2025-05-09 19:43:03,578 [DEBUG] RCON-Befehl wird gesendet: save-all flush
2025-05-09 19:43:03,579 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:43:03,580 [INFO] SUCCESS: Weltdaten gespeichert (save-all flush)
2025-05-09 19:43:03,580 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:43:06,581 [INFO] SCHRITT 6/10 (60%): Synchronisiere Weltdaten von Server 0 zu Backup
2025-05-09 19:43:06,582 [DEBUG] Verbindung zum RCON-Server server-debian-1:30575 wird hergestellt...
2025-05-09 19:43:06,585 [ERROR] RCON-Verbindung fehlgeschlagen: [Errno -2] Name or service not known
2025-05-09 19:43:06,586 [DEBUG] RCON-Befehl wird gesendet: tellraw @a {"text":"§6§lWeltdaten werden synchronisiert...","color":"gold","bold":true}
2025-05-09 19:43:06,587 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:43:06,588 [DEBUG] RCON-Befehl wird gesendet: say §6§lWeltdaten werden synchronisiert...
2025-05-09 19:43:06,589 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:43:06,590 [INFO] SUCCESS: Spielerbenachrichtigung gesendet: §6§lWeltdaten werden synchronisiert...
2025-05-09 19:43:06,591 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:43:06,592 [INFO] Synchronisiere Weltdaten zum Backup für Pod minecraft-server-0...
2025-05-09 19:43:06,593 [DEBUG] Ausführen: kubectl exec -i minecraft-server-0 -n default -- /bin/bash -c /scripts/world-sync.sh to-backup
2025-05-09 19:43:06,806 [DEBUG] STDOUT:
Synchronisiere Weltdaten für world von Quelle zu Ziel...
Kopiere von dieser Welt zu Backup-Welt...
Synchronisation abgeschlossen!
2025-05-09 19:43:06,808 [DEBUG] STDERR:
Defaulted container "minecraft-java-container" out of: minecraft-java-container, wait-for-resources (init)
2025-05-09 19:43:06,808 [INFO] SUCCESS: Weltsynchronisierung zum Backup abgeschlossen
2025-05-09 19:43:06,809 [INFO] SCHRITT 7/10 (70%): Starte zweiten Server mit Backup-Weltdaten
2025-05-09 19:43:06,810 [INFO] Skaliere StatefulSet minecraft-server auf 2 Replicas...
2025-05-09 19:43:06,811 [DEBUG] Ausführen: kubectl scale statefulset minecraft-server --replicas=2 -n default
2025-05-09 19:43:06,866 [DEBUG] STDOUT:
statefulset.apps/minecraft-server scaled
2025-05-09 19:43:06,867 [INFO] SUCCESS: StatefulSet auf 2 skaliert
2025-05-09 19:43:06,867 [INFO] Warte auf Bereitschaft von Pod minecraft-server-1...
2025-05-09 19:43:06,868 [DEBUG] Ausführen: kubectl wait --for=condition=ready pod/minecraft-server-1 --timeout=180s -n default
2025-05-09 19:44:17,221 [DEBUG] STDOUT:
pod/minecraft-server-1 condition met
2025-05-09 19:44:17,222 [INFO] SUCCESS: Pod minecraft-server-1 ist bereit
2025-05-09 19:44:17,223 [INFO] SCHRITT 8/10 (80%): Lade Weltdaten aus Backup auf Server 1
2025-05-09 19:44:17,223 [INFO] Synchronisiere Weltdaten vom Backup für Pod minecraft-server-1...
2025-05-09 19:44:17,224 [DEBUG] Ausführen: kubectl exec -i minecraft-server-1 -n default -- /bin/bash -c /scripts/world-sync.sh from-backup
2025-05-09 19:44:17,351 [DEBUG] STDOUT:
Synchronisiere Weltdaten für world von Quelle zu Ziel...
Kopiere von Backup-Welt zu dieser Welt...
Synchronisation abgeschlossen!
2025-05-09 19:44:17,352 [DEBUG] STDERR:
Defaulted container "minecraft-java-container" out of: minecraft-java-container, wait-for-resources (init)
2025-05-09 19:44:17,353 [INFO] SUCCESS: Weltsynchronisierung vom Backup abgeschlossen
2025-05-09 19:44:17,353 [DEBUG] Verbindung zum RCON-Server server-debian-1:30575 wird hergestellt...
2025-05-09 19:44:17,356 [ERROR] RCON-Verbindung fehlgeschlagen: [Errno -2] Name or service not known
2025-05-09 19:44:17,357 [DEBUG] RCON-Befehl wird gesendet: tellraw @a {"text":"§6§lAlternativer Server ist bereit. Update wird fortgesetzt...","color":"gold","bold":true}
2025-05-09 19:44:17,358 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:44:17,358 [DEBUG] RCON-Befehl wird gesendet: say §6§lAlternativer Server ist bereit. Update wird fortgesetzt...
2025-05-09 19:44:17,359 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:44:17,359 [INFO] SUCCESS: Spielerbenachrichtigung gesendet: §6§lAlternativer Server ist bereit. Update wird fortgesetzt...
2025-05-09 19:44:17,360 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:44:17,360 [INFO] SCHRITT 9/10 (90%): Starte Server 0 neu für Update
2025-05-09 19:44:17,361 [INFO] Lösche Pod minecraft-server-0 für Neustart...
2025-05-09 19:44:17,361 [DEBUG] Ausführen: kubectl delete pod minecraft-server-0 -n default
2025-05-09 19:45:18,323 [DEBUG] STDOUT:
pod "minecraft-server-0" deleted
2025-05-09 19:45:18,324 [INFO] SUCCESS: Pod minecraft-server-0 erfolgreich gelöscht
2025-05-09 19:45:18,325 [INFO] Warte auf Bereitschaft von Pod minecraft-server-0...
2025-05-09 19:45:18,326 [DEBUG] Ausführen: kubectl wait --for=condition=ready pod/minecraft-server-0 --timeout=180s -n default
2025-05-09 19:46:28,735 [DEBUG] STDOUT:
pod/minecraft-server-0 condition met
2025-05-09 19:46:28,741 [INFO] SUCCESS: Pod minecraft-server-0 ist bereit
2025-05-09 19:46:28,742 [INFO] SCHRITT 10/10 (100%): Synchronisiere Weltdaten vom Backup zurück zu Server 0
2025-05-09 19:46:28,743 [INFO] Synchronisiere Weltdaten vom Backup für Pod minecraft-server-0...
2025-05-09 19:46:28,743 [DEBUG] Ausführen: kubectl exec -i minecraft-server-0 -n default -- /bin/bash -c /scripts/world-sync.sh from-backup
2025-05-09 19:46:28,862 [DEBUG] STDOUT:
Synchronisiere Weltdaten für world von Quelle zu Ziel...
Kopiere von Backup-Welt zu dieser Welt...
Synchronisation abgeschlossen!
2025-05-09 19:46:28,863 [DEBUG] STDERR:
Defaulted container "minecraft-java-container" out of: minecraft-java-container, wait-for-resources (init)
2025-05-09 19:46:28,863 [INFO] SUCCESS: Weltsynchronisierung vom Backup abgeschlossen
2025-05-09 19:46:28,864 [INFO] SCHRITT 11/10 (110%): Räume auf: Fahre Server 1 herunter
2025-05-09 19:46:28,864 [DEBUG] Verbindung zum RCON-Server server-debian-1:30575 wird hergestellt...
2025-05-09 19:46:28,869 [ERROR] RCON-Verbindung fehlgeschlagen: [Errno -2] Name or service not known
2025-05-09 19:46:28,870 [DEBUG] RCON-Befehl wird gesendet: tellraw @a {"text":"§a§lUpdate erfolgreich abgeschlossen!","color":"gold","bold":true}
2025-05-09 19:46:28,870 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:46:28,871 [DEBUG] RCON-Befehl wird gesendet: say §a§lUpdate erfolgreich abgeschlossen!
2025-05-09 19:46:28,872 [ERROR] RCON-Befehl fehlgeschlagen: [Errno 32] Broken pipe
2025-05-09 19:46:28,872 [INFO] SUCCESS: Spielerbenachrichtigung gesendet: §a§lUpdate erfolgreich abgeschlossen!
2025-05-09 19:46:28,873 [DEBUG] RCON-Verbindung getrennt
2025-05-09 19:46:28,874 [INFO] Skaliere StatefulSet minecraft-server auf 1 Replicas...
2025-05-09 19:46:28,874 [DEBUG] Ausführen: kubectl scale statefulset minecraft-server --replicas=1 -n default
2025-05-09 19:46:28,922 [DEBUG] STDOUT:
statefulset.apps/minecraft-server scaled
2025-05-09 19:46:28,923 [INFO] SUCCESS: StatefulSet auf 1 skaliert
2025-05-09 19:46:28,923 [INFO] SUCCESS: === UPDATE ERFOLGREICH ABGESCHLOSSEN (Dauer: 206.3s) ===
2025-05-09 19:46:28,924 [INFO] Detailliertes Update-Protokoll wurde gespeichert unter: logs/minecraft_update_20250509_194302.log
